<!DOCTYPE html>
<html lang="fr">
    <head>
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
        <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.min.js" integrity="sha384-w1Q4orYjBQndcko6MimVbzY0tgp4pWB4lZ7lr30WKz0vr/aWKhXdBNmNb5D92v7s" crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/localforage/1.7.3/localforage.min.js"></script>
        <title>Site Cours Web Mobile</title>
        <link rel="stylesheet" href="./style.css">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="manifest" href="manifest.webmanifest" />
        <link rel="apple-touch-icon" href="./img/icons/apple-touch-icon-180x180.png">
        <meta name="theme-color" content="#FF0000">
    </head>
    <body>
        <div class="container">
            <div class="row card-group">
                
            </div>
            <div>Icons made by <a href="https://www.flaticon.com/authors/freepik" title="Freepik">Freepik</a> from <a href="https://www.flaticon.com/" title="Flaticon">www.flaticon.com</a></div>
        </div>
        <script src="./scripts/script.js"></script>
        <script>
            const CACHE_NAME = 'Galerie-PWA-app-cache';
            const urlsToCache = [
                '/',
                '/styles.css',
                'https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2',
                '/scripts/script.js',
                'https://code.jquery.com/jquery-3.5.1.slim.min.js',
                'https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js',
                'https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.min.js',
                'https://cdnjs.cloudflare.com/ajax/libs/localforage/1.7.3/localforage.min.js'
            ]

            if ('caches' in window) {
                caches.open(CACHE_NAME)
                .then((cache) => {
                    cache.addAll(urlsToCache)
                    console.log(cache);
                })
                .catch((e) => {
                    console.log(e);
                })
            } else {
                console.log("Pas de cache détecté");
            }

            // Regarde si le navigateur supporte les services workers
            if ('serviceWorker' in navigator) {
                // Attend que la fenêtre soit chargée
                window.addEventListener('load', () => {
                    navigator.serviceWorker.register('/service-worker.js')
                    .then((registration) => {
                        console.log('Service worker lancé dans le scope : ', registration.scope);
                    })
                    .catch((e) => {
                        console.error("Erreur dans l'enregistrement du service worker : ", e);
                    })
                });
            } else {
                console.warn('Les services workers ne sont pas supportés');
            }

            // détection du passage hors-ligne
            window.addEventListener('offline', () => {
                alert('Vous êtes maintenant hors-ligne !')
            })

            window.addEventListener('online', () => {
                alert('Vous êtes maintenant en ligne !')
            })

        </script>
        <script asyncsrc="https://cdn.jsdelivr.net/npm/pwacompat@2.0.9/pwacompat.min.js" integrity="sha384-VcI6S+HIsE80FVM1jgbd6WDFhzKYA0PecD/LcIyMQpT4fMJdijBh0I7Iblaacawc" crossorigin="anonymous"></script>
    </body>
</html>